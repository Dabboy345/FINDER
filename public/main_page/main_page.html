<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Finder - Main Page</title>
  <link rel="stylesheet" href="main_page.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>
  <nav class="navbar">
    <div class="logo-container" onclick="window.location.href='main_page.html'">
      <img src="../FINDER_LOGO.jpeg" alt="Finder" class="logo-img">
    </div>
    <div class="nav-links">
      <a href="#" class="active" id="homeBtn"><i class="fas fa-home"></i> Home</a>
      <a href="../profile/profile.html" id="profileBtn"><i class="fas fa-user"></i> Profile</a>
      <div class="notification-container">
        <i class="fas fa-bell"></i>
        <span id="notificationBadge">0</span>
      </div>
      <a href="post-creation.html" class="btn create-btn"><i class="fas fa-plus-circle"></i> Create Post</a>
      <a href="#" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </nav>

  <div class="main-content">
    <div class="feed-header">
      <h1>Welcome to Finder</h1>
      <h2>Lost something? Found something?</h2>
      <p>Connect with your community to find lost items or help others find theirs.</p>
      <!-- MATCHING BUTTON -->
      <button id="findMatchesBtn" class="btn" style="margin-top:1rem;">
        <i class="fas fa-link"></i> Find Matches
      </button>
    </div>

    <div class="posts-container">
      <!-- Posts will be loaded here dynamically -->
    </div>
  </div>

  <!-- Claim Modal -->
  <div id="claimModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" id="closeClaimModal">&times;</span>
      <h2>Send a Message to the Finder</h2>
      <div class="contact-section">
        <p>Send a message to <span id="finderEmail"></span> about this item:</p>
        <textarea id="claimMessage" placeholder="Write your message here..." rows="4"></textarea>
        <div class="modal-buttons">
          <button id="cancelClaimBtn">Cancel</button>
          <button id="sendClaimBtn">Send Message</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div id="chatModal" class="modal" style="display: none;">
    <div class="modal-content chat-modal">
      <div class="chat-header">
        <div class="chat-info">
          <h2>Chat</h2>
          <p>Chatting with <span id="chatWithUser"></span></p>
          <p class="chat-item-title">Item: <span id="chatItemTitle"></span></p>
        </div>
        <span class="close" id="closeChatModal">&times;</span>
      </div>
      <div class="chat-messages" id="chatMessages">
        <!-- Messages will be loaded here -->
      </div>
      <div class="chat-input-container">
        <textarea id="chatMessageInput" placeholder="Type your message..." rows="2"></textarea>
        <button id="sendChatMessage">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Match Suggestion Modal -->
  <div id="matchSuggestionModal" class="modal" style="display: none;">
    <div class="modal-content match-modal">
      <span class="close" id="closeMatchModal">&times;</span>
      <div class="match-header">
        <i class="fas fa-link match-icon"></i>
        <h2>You have a possible match!</h2>
      </div>
      <div class="match-content">
        <p>We found a potential match based on your item characteristics:</p>
        <div class="match-comparison">
          <div class="match-item">
            <h3>Your Post</h3>
            <div id="yourPostDetails"></div>
          </div>
          <div class="match-arrow">
            <i class="fas fa-arrows-alt-h"></i>
          </div>
          <div class="match-item">
            <h3>Potential Match</h3>
            <div id="matchedPostDetails"></div>
          </div>
        </div>
        <div class="shared-labels">
          <p><strong>Matching characteristics:</strong> <span id="sharedLabels"></span></p>
        </div>
        <div class="match-actions">
          <button id="viewMatchDetailsBtn" class="btn btn-primary">
            <i class="fas fa-eye"></i> View Details
          </button>
          <button id="dismissMatchBtn" class="btn btn-secondary">
            <i class="fas fa-times"></i> Dismiss
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="notificationDetailModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" id="closeNotificationDetail">&times;</span>
      <div id="notificationDetailBody"></div>
      <div class="modal-buttons">
        <button id="deleteNotificationBtn" class="btn btn-danger">
          <i class="fas fa-trash"></i> Delete Notification
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="main_page.js"></script>
</body>
</html>